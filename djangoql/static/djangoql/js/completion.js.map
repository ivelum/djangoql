{"version":3,"sources":["webpack:///./node_modules/lex/lexer.js","webpack:///./node_modules/lodash/_Symbol.js","webpack:///./node_modules/lodash/_baseGetTag.js","webpack:///./node_modules/lodash/_baseTrim.js","webpack:///./node_modules/lodash/_freeGlobal.js","webpack:///./node_modules/lodash/_getRawTag.js","webpack:///./node_modules/lodash/_objectToString.js","webpack:///./node_modules/lodash/_root.js","webpack:///./node_modules/lodash/_trimmedEndIndex.js","webpack:///./node_modules/lodash/debounce.js","webpack:///./node_modules/lodash/isObject.js","webpack:///./node_modules/lodash/isObjectLike.js","webpack:///./node_modules/lodash/isSymbol.js","webpack:///./node_modules/lodash/now.js","webpack:///./node_modules/lodash/throttle.js","webpack:///./node_modules/lodash/toNumber.js","webpack:///webpack/bootstrap","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/global","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/node module decorator","webpack:///./node_modules/djangoql-completion/src/lru-cache.js","webpack:///./node_modules/djangoql-completion/src/index.js","webpack:///./node_modules/djangoql-completion/src/utils.js","webpack:///./completion-widget/index.js"],"names":["Lexer","defunct","tokens","rules","remove","scan","matches","index","state","this","lastIndex","input","i","length","rule","start","states","indexOf","pattern","result","exec","j","push","action","global","k","temple","addRule","flags","multiline","ignoreCase","RegExp","source","Object","prototype","toString","call","setInput","lex","shift","reject","splice","match","token","apply","slice","charAt","module","exports","chr","Error","Symbol","require","getRawTag","objectToString","symToStringTag","toStringTag","undefined","value","trimmedEndIndex","reTrimStart","string","replace","freeGlobal","objectProto","hasOwnProperty","nativeObjectToString","isOwn","tag","unmasked","e","freeSelf","self","root","Function","reWhitespace","test","isObject","now","toNumber","nativeMax","Math","max","nativeMin","min","func","wait","options","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","TypeError","invokeFunc","time","args","thisArg","leadingEdge","setTimeout","timerExpired","shouldInvoke","timeSinceLastCall","trailingEdge","timeWaiting","remainingWait","debounced","isInvoking","arguments","clearTimeout","cancel","flush","type","baseGetTag","isObjectLike","Date","debounce","baseTrim","isSymbol","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","parseInt","other","valueOf","isBinary","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","id","loaded","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","defineProperty","enumerable","get","g","globalThis","window","obj","prop","nmd","paths","children","LRUCache","limit","size","oldest","newest","_keymap","_markEntryAsUsed","entry","newer","older","put","returnEntry","find","set","oldvalue","removeAll","keys","forEach","fun","context","desc","toJSON","s","Array","String","reIntValue","reFractionPart","reExponentPart","intRegex","floatRegex","reStringChar","stringRegex","reNotFollowedByName","whitespaceRegex","lexer","name","suggestion","text","snippetBefore","snippetAfter","explanation","suggestionText","l","lexAll","end","DjangoQL","cacheSize","currentModel","models","suggestionsAPIUrl","prefix","suggestions","selected","valuesCaseSensitive","highlightCaseSensitive","textarea","completion","completionUL","completionEnabled","loadIntrospections","introspections","selector","document","querySelector","tagName","logError","suggestionsCache","debouncedLoadFieldOptions","loadFieldOptions","bind","loading","enableCompletion","disableCompletion","onCompletionMouseClick","onCompletionMouseDown","popupCompletion","debouncedRenderCompletion","renderCompletion","setAttribute","addEventListener","onKeydown","hideCompletion","autoResize","textareaResize","style","resize","overflow","createCompletionElement","init","DOMReady","callback","readyState","syntaxHelp","createElement","className","appendChild","onscroll","throttle","onCompletionScroll","innerHTML","preventDefault","destroyCompletionElement","parentNode","removeChild","getJson","url","settings","onLoadError","request","abort","XMLHttpRequest","open","onload","status","success","JSON","parse","responseText","ontimeout","onerror","onprogress","send","initIntrospections","data","current_model","suggestions_api_url","message","console","error","selectCompletion","currentTarget","getAttribute","keyCode","onSubmit","form","submit","getComputedStyle","heightOffset","parseFloat","paddingTop","paddingBottom","height","scrollHeight","generateSuggestions","getContext","selectionStart","currentFullToken","textValue","startPos","tokenEndPos","textBefore","textAfter","trim","snippetAfterParts","split","join","endsWith","startsWith","textToPaste","cursorPosAfter","focus","setSelectionRange","display","highlight","dontForceDisplay","currentLi","completionRect","currentLiRect","liLen","loadingElement","suggestionsLen","li","querySelectorAll","getBoundingClientRect","bottom","scrollTop","top","removeEventListener","inputRect","pageYOffset","left","resolveName","f","nameParts","model","field","modelStack","relation","cursorPos","resolvedName","scope","lastToken","nextToLastToken","allTokens","pop","whitespace","logicalTokens","getCurrentFieldOptions","ctx","fieldOptions","cacheKey","isArray","loadMore","requestParams","search","cached","has_next","page","params","pair","parts","path","queryString","pairs","requestUrl","encodeURI","cache","cachedData","items","concat","populateFieldOptions","filter","item","toLowerCase","map","rectHeight","scrollBottom","searchFilter","selectionEnd","includes","lastIndexOf","nullable"],"mappings":"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","file":"js/completion.js","sourcesContent":["if (typeof module === \"object\" && typeof module.exports === \"object\") module.exports = Lexer;\n\nLexer.defunct = function (chr) {\n    throw new Error(\"Unexpected character at index \" + (this.index - 1) + \": \" + chr);\n};\n\nfunction Lexer(defunct) {\n    if (typeof defunct !== \"function\") defunct = Lexer.defunct;\n\n    var tokens = [];\n    var rules = [];\n    var remove = 0;\n    this.state = 0;\n    this.index = 0;\n    this.input = \"\";\n\n    this.addRule = function (pattern, action, start) {\n        var global = pattern.global;\n\n        if (!global) {\n            var flags = \"g\";\n            if (pattern.multiline) flags += \"m\";\n            if (pattern.ignoreCase) flags += \"i\";\n            pattern = new RegExp(pattern.source, flags);\n        }\n\n        if (Object.prototype.toString.call(start) !== \"[object Array]\") start = [0];\n\n        rules.push({\n            pattern: pattern,\n            global: global,\n            action: action,\n            start: start\n        });\n\n        return this;\n    };\n\n    this.setInput = function (input) {\n        remove = 0;\n        this.state = 0;\n        this.index = 0;\n        tokens.length = 0;\n        this.input = input;\n        return this;\n    };\n\n    this.lex = function () {\n        if (tokens.length) return tokens.shift();\n\n        this.reject = true;\n\n        while (this.index <= this.input.length) {\n            var matches = scan.call(this).splice(remove);\n            var index = this.index;\n\n            while (matches.length) {\n                if (this.reject) {\n                    var match = matches.shift();\n                    var result = match.result;\n                    var length = match.length;\n                    this.index += length;\n                    this.reject = false;\n                    remove++;\n\n                    var token = match.action.apply(this, result);\n                    if (this.reject) this.index = result.index;\n                    else if (typeof token !== \"undefined\") {\n                        switch (Object.prototype.toString.call(token)) {\n                        case \"[object Array]\":\n                            tokens = token.slice(1);\n                            token = token[0];\n                        default:\n                            if (length) remove = 0;\n                            return token;\n                        }\n                    }\n                } else break;\n            }\n\n            var input = this.input;\n\n            if (index < input.length) {\n                if (this.reject) {\n                    remove = 0;\n                    var token = defunct.call(this, input.charAt(this.index++));\n                    if (typeof token !== \"undefined\") {\n                        if (Object.prototype.toString.call(token) === \"[object Array]\") {\n                            tokens = token.slice(1);\n                            return token[0];\n                        } else return token;\n                    }\n                } else {\n                    if (this.index !== index) remove = 0;\n                    this.reject = true;\n                }\n            } else if (matches.length)\n                this.reject = true;\n            else break;\n        }\n    };\n\n    function scan() {\n        var matches = [];\n        var index = 0;\n\n        var state = this.state;\n        var lastIndex = this.index;\n        var input = this.input;\n\n        for (var i = 0, length = rules.length; i < length; i++) {\n            var rule = rules[i];\n            var start = rule.start;\n            var states = start.length;\n\n            if ((!states || start.indexOf(state) >= 0) ||\n                (state % 2 && states === 1 && !start[0])) {\n                var pattern = rule.pattern;\n                pattern.lastIndex = lastIndex;\n                var result = pattern.exec(input);\n\n                if (result && result.index === lastIndex) {\n                    var j = matches.push({\n                        result: result,\n                        action: rule.action,\n                        length: result[0].length\n                    });\n\n                    if (rule.global) index = j;\n\n                    while (--j > index) {\n                        var k = j - 1;\n\n                        if (matches[j].length > matches[k].length) {\n                            var temple = matches[j];\n                            matches[j] = matches[k];\n                            matches[k] = temple;\n                        }\n                    }\n                }\n            }\n        }\n\n        return matches;\n    }\n}\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","var trimmedEndIndex = require('./_trimmedEndIndex');\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nmodule.exports = baseTrim;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nmodule.exports = trimmedEndIndex;\n","var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n","var debounce = require('./debounce'),\n    isObject = require('./isObject');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nmodule.exports = throttle;\n","var baseTrim = require('./_baseTrim'),\n    isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","/**\n * https://github.com/rsms/js-lru/blob/v2/lru.js\n *\n * A doubly linked list-based Least Recently Used (LRU) cache. Will keep most\n * recently used items while discarding least recently used items when its limit\n * is reached.\n *\n * Licensed under MIT. Copyright (c) 2010 Rasmus Andersson <http://hunch.se/>\n * See README.md for details.\n *\n * Illustration of the design:\n *\n *       entry             entry             entry             entry\n *       ______            ______            ______            ______\n *      | head |.newer => |      |.newer => |      |.newer => | tail |\n *      |  A   |          |  B   |          |  C   |          |  D   |\n *      |______| <= older.|______| <= older.|______| <= older.|______|\n *\n *  removed  <--  <--  <--  <--  <--  <--  <--  <--  <--  <--  <--  added\n */\nfunction LRUCache (limit) {\n  // Current size of the cache. (Read-only).\n  this.size = 0;\n  // Maximum number of items this cache can hold.\n  this.limit = limit;\n  this.oldest = this.newest = undefined;\n  this._keymap = {};\n}\n\n\nLRUCache.prototype._markEntryAsUsed = function(entry) {\n  if (entry === this.newest) {\n    // Already the most recenlty used entry, so no need to update the list\n    return;\n  }\n  // HEAD--------------TAIL\n  //   <.older   .newer>\n  //  <--- add direction --\n  //   A  B  C  <D>  E\n  if (entry.newer) {\n    if (entry === this.oldest) {\n      this.oldest = entry.newer;\n    }\n    entry.newer.older = entry.older; // C <-- E.\n  }\n  if (entry.older) {\n    entry.older.newer = entry.newer; // C. --> E\n  }\n  entry.newer = undefined; // D --x\n  entry.older = this.newest; // D. --> E\n  if (this.newest) {\n    this.newest.newer = entry; // E. <-- D\n  }\n  this.newest = entry;\n};\n\n/**\n * Put <value> into the cache associated with <key>. Returns the entry which was\n * removed to make room for the new entry. Otherwise undefined is returned\n * (i.e. if there was enough room already).\n */\nLRUCache.prototype.put = function(key, value) {\n  var entry = this._keymap[key];\n\n  if (entry) {\n    // update existing\n    entry.value = value;\n    this._markEntryAsUsed(entry);\n    return;\n  }\n\n  // new entry\n  this._keymap[key] = entry = {key:key, value:value, older:undefined, newer:undefined};\n\n  if (this.newest) {\n    // link previous tail to the new tail (entry)\n    this.newest.newer = entry;\n    entry.older = this.newest;\n  } else {\n    // we're first in -- yay\n    this.oldest = entry;\n  }\n\n  // add new entry to the end of the linked list -- it's now the freshest entry.\n  this.newest = entry;\n  this.size++;\n  if (this.size > this.limit) {\n    // we hit the limit -- remove the head\n    return this.shift();\n  }\n};\n\n/**\n * Purge the least recently used (oldest) entry from the cache. Returns the\n * removed entry or undefined if the cache was empty.\n *\n * If you need to perform any form of finalization of purged items, this is a\n * good place to do it. Simply override/replace this function:\n *\n *   var c = new LRUCache(123);\n *   c.shift = function() {\n *     var entry = LRUCache.prototype.shift.call(this);\n *     doSomethingWith(entry);\n *     return entry;\n *   }\n */\nLRUCache.prototype.shift = function() {\n  // todo: handle special case when limit == 1\n  var entry = this.oldest;\n  if (entry) {\n    if (this.oldest.newer) {\n      // advance the list\n      this.oldest = this.oldest.newer;\n      this.oldest.older = undefined;\n    } else {\n      // the cache is exhausted\n      this.oldest = undefined;\n      this.newest = undefined;\n    }\n    // Remove last strong reference to <entry> and remove links from the purged\n    // entry being returned:\n    entry.newer = entry.older = undefined;\n    // delete is slow, but we need to do this to avoid uncontrollable growth:\n    delete this._keymap[entry.key];\n    this.size--;\n  }\n  return entry;\n};\n\n/**\n * Get and register recent use of <key>. Returns the value associated with <key>\n * or undefined if not in cache.\n */\nLRUCache.prototype.get = function(key, returnEntry) {\n  // First, find our cache entry\n  var entry = this._keymap[key];\n  if (entry === undefined) return; // Not cached. Sorry.\n  // As <key> was found in the cache, register it as being requested recently\n  this._markEntryAsUsed(entry);\n  return returnEntry ? entry : entry.value;\n};\n\n// ----------------------------------------------------------------------------\n// Following code is optional and can be removed without breaking the core\n// functionality.\n\n/**\n * Check if <key> is in the cache without registering recent use. Feasible if\n * you do not want to chage the state of the cache, but only \"peek\" at it.\n * Returns the entry associated with <key> if found, or undefined if not found.\n */\nLRUCache.prototype.find = function(key) {\n  return this._keymap[key];\n};\n\n/**\n * Update the value of entry with <key>. Returns the old value, or undefined if\n * entry was not in the cache.\n */\nLRUCache.prototype.set = function(key, value) {\n  var oldvalue, entry = this.get(key, true);\n  if (entry) {\n    oldvalue = entry.value;\n    entry.value = value;\n  } else {\n    oldvalue = this.put(key, value);\n    if (oldvalue) oldvalue = oldvalue.value;\n  }\n  return oldvalue;\n};\n\n/**\n * Remove entry <key> from cache and return its value. Returns undefined if not\n * found.\n */\nLRUCache.prototype.remove = function(key) {\n  var entry = this._keymap[key];\n  if (!entry) return;\n  delete this._keymap[entry.key]; // need to do delete unfortunately\n  if (entry.newer && entry.older) {\n    // relink the older entry with the newer entry\n    entry.older.newer = entry.newer;\n    entry.newer.older = entry.older;\n  } else if (entry.newer) {\n    // remove the link to us\n    entry.newer.older = undefined;\n    // link the newer entry to head\n    this.oldest = entry.newer;\n  } else if (entry.older) {\n    // remove the link to us\n    entry.older.newer = undefined;\n    // link the newer entry to head\n    this.newest = entry.older;\n  } else {// if(entry.older === undefined && entry.newer === undefined) {\n    this.oldest = this.newest = undefined;\n  }\n\n  this.size--;\n  return entry.value;\n};\n\n/** Removes all entries */\nLRUCache.prototype.removeAll = function() {\n  // This should be safe, as we never expose strong refrences to the outside\n  this.oldest = this.newest = undefined;\n  this.size = 0;\n  this._keymap = {};\n};\n\n/**\n * Return an array containing all keys of entries stored in the cache object, in\n * arbitrary order.\n */\nif (typeof Object.keys === 'function') {\n  LRUCache.prototype.keys = function() {\n    return Object.keys(this._keymap);\n  };\n} else {\n  LRUCache.prototype.keys = function() {\n    var keys = [];\n    for (var k in this._keymap) {\n      keys.push(k);\n    }\n    return keys;\n  };\n}\n\n/**\n * Call `fun` for each entry. Starting with the newest entry if `desc` is a true\n * value, otherwise starts with the oldest (head) enrty and moves towards the\n * tail.\n *\n * `fun` is called with 3 arguments in the context `context`:\n *   `fun.call(context, Object key, Object value, LRUCache self)`\n */\nLRUCache.prototype.forEach = function(fun, context, desc) {\n  var entry;\n  if (context === true) {\n    desc = true;\n    context = undefined;\n  } else if (typeof context !== 'object') {\n    context = this;\n  }\n  if (desc) {\n    entry = this.newest;\n    while (entry) {\n      fun.call(context, entry.key, entry.value, this);\n      entry = entry.older;\n    }\n  } else {\n    entry = this.oldest;\n    while (entry) {\n      fun.call(context, entry.key, entry.value, this);\n      entry = entry.newer;\n    }\n  }\n};\n\n/** Returns a JSON (array) representation */\nLRUCache.prototype.toJSON = function() {\n  var s = new Array(this.size), i = 0, entry = this.oldest;\n  while (entry) {\n    s[i++] = { key: entry.key, value: entry.value };\n    entry = entry.newer;\n  }\n  return s;\n};\n\n/** Returns a String representation */\nLRUCache.prototype.toString = function() {\n  var s = '', entry = this.oldest;\n  while (entry) {\n    s += String(entry.key)+':'+entry.value;\n    entry = entry.newer;\n    if (entry) {\n      s += ' < ';\n    }\n  }\n  return s;\n};\n\n// Export ourselves\nexport default LRUCache;\n","import Lexer from 'lex';\nimport debounce from 'lodash/debounce';\nimport isObject from 'lodash/isObject';\nimport throttle from 'lodash/throttle';\n\nimport LRUCache from './lru-cache';\nimport { DOMReady, escapeRegExp, setUrlParams } from './utils';\n\nconst reIntValue = '(-?0|-?[1-9][0-9]*)';\nconst reFractionPart = '\\\\.[0-9]+';\nconst reExponentPart = '[eE][+-]?[0-9]+';\nconst intRegex = new RegExp(reIntValue);\nconst floatRegex = new RegExp(\n  `${reIntValue}${reFractionPart}${reExponentPart}`\n  + `|${reIntValue}${reFractionPart}|${reIntValue}${reExponentPart}`,\n);\nconst reLineTerminators = '\\\\n\\\\r\\\\u2028\\\\u2029';\nconst reEscapedChar = '\\\\\\\\[\\\\\\\\\"/bfnrt]';\nconst reEscapedUnicode = '\\\\\\\\u[0-9A-Fa-f]{4}';\nconst reStringChar = `[^\\\\\\\\\"\\\\\\\\\\\\\\\\${reLineTerminators}]`;\nconst stringRegex = new RegExp(\n  '\\\\\"('\n  + `${reEscapedChar}|${reEscapedUnicode}|${reStringChar}`\n  + ')*\\\\\"',\n);\nconst nameRegex = /[_A-Za-z][_0-9A-Za-z]*(\\.[_A-Za-z][_0-9A-Za-z]*)*/;\nconst reNotFollowedByName = '(?![_0-9A-Za-z])';\nconst whitespaceRegex = /[ \\t\\v\\f\\u00A0]+/;\n\nconst lexer = new Lexer(() => {\n  // Silently swallow any lexer errors\n});\n\nfunction token(name, value) {\n  return { name, value };\n}\n\nlexer.addRule(whitespaceRegex, () => { /* ignore whitespace */ });\nlexer.addRule(/\\./, (l) => token('DOT', l));\nlexer.addRule(/,/, (l) => token('COMMA', l));\nlexer.addRule(new RegExp(`or${reNotFollowedByName}`), (l) => token('OR', l));\nlexer.addRule(new RegExp(`and${reNotFollowedByName}`), (l) => token('AND', l));\nlexer.addRule(new RegExp(`not${reNotFollowedByName}`), (l) => token('NOT', l));\nlexer.addRule(new RegExp(`in${reNotFollowedByName}`), (l) => token('IN', l));\nlexer.addRule(\n  new RegExp(`startswith${reNotFollowedByName}`),\n  (l) => token('STARTSWITH', l),\n);\nlexer.addRule(\n  new RegExp(`endswith${reNotFollowedByName}`),\n  (l) => token('ENDSWITH', l),\n);\nlexer.addRule(\n  new RegExp(`True${reNotFollowedByName}`),\n  (l) => token('TRUE', l),\n);\nlexer.addRule(\n  new RegExp(`False${reNotFollowedByName}`),\n  (l) => token('FALSE', l),\n);\nlexer.addRule(\n  new RegExp(`None${reNotFollowedByName}`),\n  (l) => token('NONE', l),\n);\nlexer.addRule(nameRegex, (l) => token('NAME', l));\nlexer.addRule(\n  stringRegex,\n  // Trim leading and trailing quotes:\n  (l) => token('STRING_VALUE', l.slice(1, l.length - 1)),\n);\nlexer.addRule(intRegex, (l) => token('INT_VALUE', l));\nlexer.addRule(floatRegex, (l) => token('FLOAT_VALUE', l));\nlexer.addRule(/\\(/, (l) => token('PAREN_L', l));\nlexer.addRule(/\\)/, (l) => token('PAREN_R', l));\nlexer.addRule(/=/, (l) => token('EQUALS', l));\nlexer.addRule(/!=/, (l) => token('NOT_EQUALS', l));\nlexer.addRule(/>/, (l) => token('GREATER', l));\nlexer.addRule(/>=/, (l) => token('GREATER_EQUAL', l));\nlexer.addRule(/</, (l) => token('LESS', l));\nlexer.addRule(/<=/, (l) => token('LESS_EQUAL', l));\nlexer.addRule(/~/, (l) => token('CONTAINS', l));\nlexer.addRule(/!~/, (l) => token('NOT_CONTAINS', l));\nlexer.lexAll = function () {\n  let match;\n  const result = [];\n  while (match = this.lex()) { // eslint-disable-line no-cond-assign\n    match.start = this.index - match.value.length;\n    match.end = this.index;\n    result.push(match);\n  }\n  return result;\n};\n\nfunction suggestion(text, snippetBefore, snippetAfter, explanation) {\n  // text is being displayed in completion box and pasted when you hit Enter.\n  // snippetBefore is an optional extra text to be pasted before main text.\n  // snippetAfter is an optional text to be pasted after. It may also include\n  // \"|\" symbol to designate desired cursor position after paste.\n  let suggestionText = text;\n  if (typeof explanation !== 'undefined') {\n    suggestionText += `<i>${explanation}</i>`;\n  }\n\n  return {\n    text,\n    snippetBefore: snippetBefore || '',\n    snippetAfter: snippetAfter || '',\n    suggestionText,\n  };\n}\n\n// Main DjangoQL object\nconst DjangoQL = function (options) {\n  let cacheSize = 100;\n\n  this.options = options;\n  this.currentModel = null;\n  this.models = {};\n  this.suggestionsAPIUrl = null;\n\n  this.token = token;\n  this.lexer = lexer;\n\n  this.prefix = '';\n  this.suggestions = [];\n  this.selected = null;\n  this.valuesCaseSensitive = false;\n  this.highlightCaseSensitive = true;\n\n  this.textarea = null;\n  this.completion = null;\n  this.completionUL = null;\n  this.completionEnabled = false;\n\n  // Initialization\n  if (!isObject(options)) {\n    this.logError('Please pass an object with initialization parameters');\n    return;\n  }\n  this.loadIntrospections(options.introspections);\n  if (typeof options.selector === 'string') {\n    this.textarea = document.querySelector(options.selector);\n  } else {\n    this.textarea = options.selector;\n  }\n  if (!this.textarea) {\n    this.logError(`Element not found by selector: ${options.selector}`);\n    return;\n  }\n  if (this.textarea.tagName !== 'TEXTAREA') {\n    this.logError(\n      'selector must be pointing to <textarea> element, '\n      + `but ${this.textarea.tagName} was found`,\n    );\n    return;\n  }\n  if (options.valuesCaseSensitive) {\n    this.valuesCaseSensitive = true;\n  }\n  if (options.cacheSize) {\n    if (parseInt(options.cacheSize, 10) !== options.cacheSize\n        || options.cacheSize < 1) {\n      this.logError('cacheSize must be a positive integer');\n    } else {\n      cacheSize = options.cacheSize;\n    }\n  }\n  this.suggestionsCache = new LRUCache(cacheSize);\n  this.debouncedLoadFieldOptions = debounce(\n    this.loadFieldOptions.bind(this),\n    300,\n  );\n  this.loading = false;\n\n  this.enableCompletion = this.enableCompletion.bind(this);\n  this.disableCompletion = this.disableCompletion.bind(this);\n\n  // these handlers are re-used more than once in the code below,\n  // so it's handy to have them already bound\n  this.onCompletionMouseClick = this.onCompletionMouseClick.bind(this);\n  this.onCompletionMouseDown = this.onCompletionMouseDown.bind(this);\n  this.popupCompletion = this.popupCompletion.bind(this);\n  this.debouncedRenderCompletion = debounce(\n    this.renderCompletion.bind(this),\n    50,\n  );\n\n  // Bind event handlers and initialize completion & textSize containers\n  this.textarea.setAttribute('autocomplete', 'off');\n  this.textarea.addEventListener('keydown', this.onKeydown.bind(this));\n  this.textarea.addEventListener('blur', this.hideCompletion.bind(this));\n  this.textarea.addEventListener('click', this.popupCompletion);\n  if (options.autoResize) {\n    this.textareaResize = this.textareaResize.bind(this);\n    this.textarea.style.resize = 'none';\n    this.textarea.style.overflow = 'hidden';\n    this.textarea.addEventListener('input', this.textareaResize);\n    this.textareaResize();\n    // There could be a situation when fonts are not loaded yet at this\n    // point. When fonts are finally loaded it could make textarea looking\n    // weird - for example in Django 1.9+ last line won't fit. To fix this\n    // we call .textareaResize() once again when window is fully loaded.\n    window.addEventListener('load', this.textareaResize);\n  } else {\n    this.textareaResize = null;\n    // Catch resize events and re-position completion box.\n    // See http://stackoverflow.com/a/7055239\n    this.textarea.addEventListener(\n      'mouseup',\n      this.renderCompletion.bind(this, true),\n    );\n    this.textarea.addEventListener(\n      'mouseout',\n      this.renderCompletion.bind(this, true),\n    );\n  }\n\n  this.createCompletionElement();\n};\n\n// Backward compatibility\nDjangoQL.init = function (options) {\n  return new DjangoQL(options);\n};\n\nDjangoQL.DOMReady = DOMReady;\n\nDjangoQL.prototype = {\n  createCompletionElement() {\n    const { options } = this;\n    let syntaxHelp;\n\n    if (!this.completion) {\n      this.completion = document.createElement('div');\n      this.completion.className = 'djangoql-completion';\n      document.querySelector('body').appendChild(this.completion);\n      this.completionUL = document.createElement('ul');\n      this.completionUL.onscroll = throttle(\n        this.onCompletionScroll.bind(this),\n        50,\n      );\n      this.completion.appendChild(this.completionUL);\n      if (typeof options.syntaxHelp === 'string') {\n        syntaxHelp = document.createElement('p');\n        syntaxHelp.className = 'syntax-help';\n        syntaxHelp.innerHTML = `<a href=\"${options.syntaxHelp}`\n          + '\" target=\"_blank\">Syntax Help</a>';\n        syntaxHelp.addEventListener('mousedown', (e) => {\n          // This is needed to prevent conflict with textarea.onblur event\n          // handler, which tries to hide the completion box and therefore\n          // makes Syntax Help link malfunctional.\n          e.preventDefault();\n        });\n        this.completion.appendChild(syntaxHelp);\n      }\n\n      // eslint-disable-next-line no-prototype-builtins\n      this.completionEnabled = options.hasOwnProperty('completionEnabled')\n        ? options.completionEnabled\n        : true;\n    }\n  },\n\n  destroyCompletionElement() {\n    if (this.completion) {\n      this.completion.parentNode.removeChild(this.completion);\n      this.completion = null;\n      this.completionEnabled = false;\n    }\n  },\n\n  enableCompletion() {\n    this.completionEnabled = true;\n  },\n\n  disableCompletion() {\n    this.completionEnabled = false;\n    this.hideCompletion();\n  },\n\n  getJson(url, settings) {\n    this.loading = true;\n\n    const onLoadError = function () {\n      this.loading = false;\n      this.request = null;\n      this.logError(`failed to fetch from ${url}`);\n    }.bind(this);\n\n    if (this.request) {\n      this.request.abort();\n    }\n    this.request = new XMLHttpRequest();\n\n    this.request.open('GET', url, true);\n    this.request.onload = function () {\n      this.loading = false;\n      if (this.request.status === 200) {\n        if (typeof settings.success === 'function') {\n          settings.success(JSON.parse(this.request.responseText));\n        }\n      } else {\n        onLoadError();\n      }\n      this.request = null;\n    }.bind(this);\n    this.request.ontimeout = onLoadError;\n    this.request.onerror = onLoadError;\n    /* eslint-disable max-len */\n    // Workaround for IE9, see\n    // https://cypressnorth.com/programming/internet-explorer-aborting-ajax-requests-fixed/\n    /* eslint-enable max-len */\n    this.request.onprogress = function () {};\n    window.setTimeout(this.request.send.bind(this.request));\n  },\n\n  loadIntrospections(introspections) {\n    const initIntrospections = function (data) {\n      this.currentModel = data.current_model;\n      this.models = data.models;\n      this.suggestionsAPIUrl = data.suggestions_api_url;\n    }.bind(this);\n\n    if (typeof introspections === 'string') {\n      // treat as URL\n      this.getJson(introspections, { success: initIntrospections });\n    } else if (isObject(introspections)) {\n      initIntrospections(introspections);\n    } else {\n      this.logError(\n        'introspections parameter is expected to be either URL or '\n        + `object with definitions, but ${introspections} was found`,\n      );\n    }\n  },\n\n  logError(message) {\n    console.error(`DjangoQL: ${message}`); // eslint-disable-line no-console\n  },\n\n  onCompletionMouseClick(e) {\n    this.selectCompletion(\n      parseInt(e.currentTarget.getAttribute('data-index'), 10),\n    );\n  },\n\n  onCompletionMouseDown(e) {\n    // This is needed to prevent 'blur' event on textarea\n    e.preventDefault();\n  },\n\n  onKeydown(e) {\n    switch (e.keyCode) {\n      case 38: // up arrow\n        if (this.suggestions.length) {\n          if (this.selected === null) {\n            this.selected = this.suggestions.length - 1;\n          } else if (this.selected === 0) {\n            this.selected = null;\n          } else {\n            this.selected -= 1;\n          }\n          this.renderCompletion();\n          e.preventDefault();\n        }\n        break;\n\n      case 40: // down arrow\n        if (this.suggestions.length) {\n          if (this.selected === null) {\n            this.selected = 0;\n          } else if (this.selected < this.suggestions.length - 1) {\n            this.selected += 1;\n          } else {\n            this.selected = null;\n          }\n          this.renderCompletion();\n          e.preventDefault();\n        }\n        break;\n\n      case 9: // Tab\n        if (this.selected !== null) {\n          this.selectCompletion(this.selected);\n          e.preventDefault();\n        }\n        break;\n\n      case 13: // Enter\n        // Technically this is a textarea, due to automatic multi-line feature,\n        // but other than that it should look and behave like a normal input.\n        // So expected behavior when pressing Enter is to submit the form,\n        // not to add a new line.\n        if (this.selected !== null) {\n          this.selectCompletion(this.selected);\n        } else if (typeof this.options.onSubmit === 'function') {\n          this.options.onSubmit(this.textarea.value);\n        } else {\n          e.currentTarget.form.submit();\n        }\n        e.preventDefault();\n        break;\n\n      case 27: // Esc\n        this.hideCompletion();\n        break;\n\n      case 16: // Shift\n      case 17: // Ctrl\n      case 18: // Alt\n      case 91: // Windows Key or Left Cmd on Mac\n      case 93: // Windows Menu or Right Cmd on Mac\n        // Control keys shouldn't trigger completion popup\n        break;\n\n      default:\n        // When keydown is fired input value has not been updated yet,\n        // so we need to wait\n        window.setTimeout(this.popupCompletion, 10);\n        break;\n    }\n  },\n\n  textareaResize() {\n    // Automatically grow/shrink textarea to have the contents always visible\n    const style = window.getComputedStyle(this.textarea, null);\n    const heightOffset = parseFloat(style.paddingTop)\n      + parseFloat(style.paddingBottom);\n    this.textarea.style.height = '5px';\n    // dirty hack, works for Django admin styles only.\n    // Ping me if you know how to get rid of \"+1\"\n    const height = (this.textarea.scrollHeight - heightOffset) + 1;\n    this.textarea.style.height = `${height}px`;\n  },\n\n  popupCompletion() {\n    this.generateSuggestions();\n    this.renderCompletion();\n  },\n\n  selectCompletion(index) {\n    const context = this.getContext(\n      this.textarea.value,\n      this.textarea.selectionStart,\n    );\n    const { currentFullToken } = context;\n    let textValue = this.textarea.value;\n    const startPos = this.textarea.selectionStart - context.prefix.length;\n    let tokenEndPos = null;\n\n    // cutting current token from the string\n    if (currentFullToken) {\n      tokenEndPos = currentFullToken.end;\n      textValue = (\n        textValue.slice(0, startPos) + textValue.slice(tokenEndPos)\n      );\n    }\n\n    const textBefore = textValue.slice(0, startPos);\n    let textAfter = textValue.slice(startPos);\n    // preventing double spaces after pasting the suggestion\n    textAfter = textAfter.trim();\n\n    const completion = this.suggestions[index];\n    let { snippetBefore, snippetAfter } = completion;\n    const snippetAfterParts = snippetAfter.split('|');\n    if (snippetAfterParts.length > 1) {\n      snippetAfter = snippetAfterParts.join('');\n      if (!snippetBefore && !completion.text) {\n        [snippetBefore, snippetAfter] = snippetAfterParts;\n      }\n    }\n    if (textBefore.endsWith(snippetBefore)) {\n      snippetBefore = '';\n    }\n    if (textAfter.startsWith(snippetAfter)) {\n      snippetAfter = '';\n    }\n    const textToPaste = snippetBefore + completion.text + snippetAfter;\n    let cursorPosAfter = textBefore.length + textToPaste.length;\n    if (snippetAfterParts.length > 1) {\n      cursorPosAfter -= snippetAfterParts[1].length;\n    }\n\n    this.textarea.value = textBefore + textToPaste + textAfter;\n    this.textarea.focus();\n    this.textarea.setSelectionRange(cursorPosAfter, cursorPosAfter);\n    this.selected = null;\n    if (this.textareaResize) {\n      this.textareaResize();\n    }\n    this.generateSuggestions(this.textarea);\n    this.renderCompletion();\n  },\n\n  hideCompletion() {\n    this.selected = null;\n    if (this.completion) {\n      this.completion.style.display = 'none';\n    }\n  },\n\n  highlight(text, highlight) {\n    if (!highlight || !text) {\n      return text;\n    }\n    if (this.highlightCaseSensitive) {\n      return text.split(highlight).join(`<b>${highlight}</b>`);\n    }\n    return text.replace(\n      new RegExp(`(${escapeRegExp(highlight)})`, 'ig'),\n      '<b>$1</b>',\n    );\n  },\n\n  renderCompletion(dontForceDisplay) {\n    let currentLi;\n    let i;\n    let completionRect;\n    let currentLiRect;\n    let liLen;\n    let loadingElement;\n\n    if (!this.completionEnabled) {\n      this.hideCompletion();\n      return;\n    }\n\n    if (dontForceDisplay && this.completion.style.display === 'none') {\n      return;\n    }\n    if (!this.suggestions.length && !this.loading) {\n      this.hideCompletion();\n      return;\n    }\n\n    const suggestionsLen = this.suggestions.length;\n    const li = [].slice.call(\n      this.completionUL.querySelectorAll('li[data-index]'),\n    );\n    liLen = li.length;\n\n    // Update or create necessary elements\n    for (i = 0; i < suggestionsLen; i++) {\n      if (i < liLen) {\n        currentLi = li[i];\n      } else {\n        currentLi = document.createElement('li');\n        currentLi.setAttribute('data-index', i);\n        currentLi.addEventListener('click', this.onCompletionMouseClick);\n        currentLi.addEventListener('mousedown', this.onCompletionMouseDown);\n        this.completionUL.appendChild(currentLi);\n      }\n      currentLi.innerHTML = this.highlight(\n        this.suggestions[i].suggestionText,\n        this.prefix,\n      );\n      if (i === this.selected) {\n        currentLi.className = 'active';\n        currentLiRect = currentLi.getBoundingClientRect();\n        completionRect = this.completionUL.getBoundingClientRect();\n        if (currentLiRect.bottom > completionRect.bottom) {\n          this.completionUL.scrollTop = this.completionUL.scrollTop + 2\n            + (currentLiRect.bottom - completionRect.bottom);\n        } else if (currentLiRect.top < completionRect.top) {\n          this.completionUL.scrollTop = this.completionUL.scrollTop - 2\n            - (completionRect.top - currentLiRect.top);\n        }\n      } else {\n        currentLi.className = '';\n      }\n    }\n    // Remove redundant elements\n    while (liLen > suggestionsLen) {\n      liLen--;\n      li[liLen].removeEventListener('click', this.onCompletionMouseClick);\n      li[liLen].removeEventListener('mousedown', this.onCompletionMouseDown);\n      this.completionUL.removeChild(li[liLen]);\n    }\n\n    loadingElement = this.completionUL.querySelector('li.djangoql-loading');\n\n    if (this.loading) {\n      if (!loadingElement) {\n        loadingElement = document.createElement('li');\n        loadingElement.className = 'djangoql-loading';\n        loadingElement.innerHTML = '&nbsp;';\n        this.completionUL.appendChild(loadingElement);\n      }\n    } else if (loadingElement) {\n      this.completionUL.removeChild(loadingElement);\n    }\n\n    const inputRect = this.textarea.getBoundingClientRect();\n    const top = window.pageYOffset + inputRect.top + inputRect.height;\n    this.completion.style.top = `${top}px`;\n    this.completion.style.left = `${inputRect.left}px`;\n    this.completion.style.display = 'block';\n  },\n\n  resolveName(name) {\n    // Walk through introspection definitions and get target model and field\n    let f;\n    let i;\n    let l;\n    const nameParts = name.split('.');\n    let model = this.currentModel;\n    let field = null;\n\n    const modelStack = [];\n    if (model) {\n      modelStack.push(model);\n      for (i = 0, l = nameParts.length; i < l; i++) {\n        f = this.models[model][nameParts[i]];\n        if (!f) {\n          model = null;\n          field = null;\n          break;\n        } else if (f.type === 'relation') {\n          model = f.relation;\n          modelStack.push(model);\n          field = null;\n        } else {\n          field = nameParts[i];\n        }\n      }\n    }\n    return { modelStack, model, field };\n  },\n\n  getContext(text, cursorPos) {\n    // This function returns an object with the following 4 properties:\n    let prefix; // text already entered by user in the current scope\n    let scope = null; // 'field', 'comparison', 'value', 'logical' or null\n    let model = null; // model, set for 'field', 'comparison' and 'value'\n    let field = null; // field, set for 'comparison' and 'value'\n    // Stack of models that includes all entered models\n    let modelStack = [this.currentModel];\n\n    let nameParts;\n    let resolvedName;\n    let lastToken = null;\n    let nextToLastToken = null;\n    const tokens = this.lexer.setInput(text.slice(0, cursorPos)).lexAll();\n    const allTokens = this.lexer.setInput(text).lexAll();\n    let currentFullToken = null;\n    if (tokens.length && tokens[tokens.length - 1].end >= cursorPos) {\n      // if cursor is positioned on the last token then remove it.\n      // We are only interested in tokens preceding current.\n      currentFullToken = allTokens[tokens.length - 1];\n      tokens.pop();\n    }\n    if (tokens.length) {\n      lastToken = tokens[tokens.length - 1];\n      if (tokens.length > 1) {\n        nextToLastToken = tokens[tokens.length - 2];\n      }\n    }\n\n    // Current token which is currently being typed may be not complete yet,\n    // so lexer may fail to recognize it correctly. So we define current token\n    // prefix as a string without whitespace positioned after previous token\n    // and until current cursor position.\n    prefix = text.slice(lastToken ? lastToken.end : 0, cursorPos);\n    const whitespace = prefix.match(whitespaceRegex);\n    if (whitespace) {\n      prefix = prefix.slice(whitespace[0].length);\n    }\n    if (prefix === '(') {\n      // Paren should not be a part of suggestion\n      prefix = '';\n    }\n\n    const logicalTokens = ['AND', 'OR'];\n    if (prefix === ')' && !whitespace) {\n      // Nothing to suggest right after right paren\n    } else if (!lastToken\n      || (logicalTokens.indexOf(lastToken.name) >= 0 && whitespace)\n      || (prefix === '.' && lastToken && !whitespace)\n      || (lastToken.name === 'PAREN_L'\n        && (!nextToLastToken\n          || logicalTokens.indexOf(nextToLastToken.name) >= 0))) {\n      scope = 'field';\n      model = this.currentModel;\n      if (prefix === '.') {\n        prefix = text.slice(lastToken.start, cursorPos);\n      }\n      nameParts = prefix.split('.');\n      if (nameParts.length > 1) {\n        // use last part as a prefix, analyze preceding parts to get the model\n        prefix = nameParts.pop();\n        resolvedName = this.resolveName(nameParts.join('.'));\n        if (resolvedName.model && !resolvedName.field) {\n          model = resolvedName.model;\n          modelStack = resolvedName.modelStack;\n        } else {\n          // if resolvedName.model is null that means that model wasn't found.\n          // if resolvedName.field is NOT null that means that the name\n          // preceding current prefix is a concrete field and not a relation,\n          // and therefore it can't have any properties.\n          scope = null;\n          model = null;\n        }\n      }\n    } else if (lastToken\n      && whitespace\n      && nextToLastToken\n      && nextToLastToken.name === 'NAME'\n      && ['EQUALS', 'NOT_EQUALS', 'CONTAINS', 'NOT_CONTAINS', 'GREATER_EQUAL',\n        'GREATER', 'LESS_EQUAL', 'LESS'].indexOf(lastToken.name) >= 0) {\n      resolvedName = this.resolveName(nextToLastToken.value);\n      if (resolvedName.model) {\n        scope = 'value';\n        model = resolvedName.model;\n        field = resolvedName.field;\n        modelStack = resolvedName.modelStack;\n        if (prefix[0] === '\"' && (this.models[model][field].type === 'str'\n            || this.models[model][field].options)) {\n          prefix = prefix.slice(1);\n        }\n      }\n    } else if (lastToken && whitespace && lastToken.name === 'NAME') {\n      resolvedName = this.resolveName(lastToken.value);\n      if (resolvedName.model) {\n        scope = 'comparison';\n        model = resolvedName.model;\n        field = resolvedName.field;\n        modelStack = resolvedName.modelStack;\n      }\n    } else if (lastToken\n      && whitespace\n      && ['PAREN_R', 'INT_VALUE', 'FLOAT_VALUE', 'STRING_VALUE']\n        .indexOf(lastToken.name) >= 0) {\n      scope = 'logical';\n    }\n\n    return {\n      prefix,\n      scope,\n      model,\n      field,\n      currentFullToken,\n      modelStack,\n    };\n  },\n\n  getCurrentFieldOptions() {\n    const input = this.textarea;\n    const ctx = this.getContext(input.value, input.selectionStart);\n    const model = this.models[ctx.model];\n    const field = ctx.field && model[ctx.field];\n    const fieldOptions = {\n      cacheKey: null,\n      context: ctx,\n      field,\n      model,\n      options: null,\n    };\n\n    if (ctx.scope !== 'value' || !field || !field.options) {\n      return null;\n    }\n    if (Array.isArray(field.options)) {\n      fieldOptions.options = field.options;\n    } else if (field.options === true) {\n      // Means get via API\n      if (!this.suggestionsAPIUrl) {\n        return null;\n      }\n      fieldOptions.cacheKey = `${ctx.model}.${ctx.field}|${ctx.prefix}`;\n    }\n    return fieldOptions;\n  },\n\n  loadFieldOptions(loadMore) {\n    const fieldOptions = this.getCurrentFieldOptions() || {};\n    const { context } = fieldOptions;\n\n    if (!fieldOptions.cacheKey) {\n      // The context has likely changed, user's cursor is in another position\n      return;\n    }\n    const requestParams = {\n      field: `${context.model}.${context.field}`,\n      search: context.prefix,\n    };\n\n    const cached = this.suggestionsCache.get(fieldOptions.cacheKey) || {};\n    if (loadMore && cached.has_next) {\n      requestParams.page = cached.page ? cached.page + 1 : 1;\n    } else if (cached.page) {\n      // At least the first page is already loaded\n      return;\n    }\n\n    cached.loading = true;\n    this.suggestionsCache.set(fieldOptions.cacheKey, cached);\n\n    const requestUrl = setUrlParams(this.suggestionsAPIUrl, requestParams);\n    this.getJson(requestUrl, {\n      success: function (data) {\n        const cache = this.suggestionsCache.get(fieldOptions.cacheKey) || {};\n        if (data.page - 1 !== (cache.page || 0)) {\n          // either pages were loaded out of order,\n          // or cache is no longer exists\n          return;\n        }\n        const cachedData = {\n          ...data,\n          items: (cache.items || []).concat(data.items),\n        };\n        this.suggestionsCache.set(fieldOptions.cacheKey, cachedData);\n        this.loading = false;\n        this.populateFieldOptions();\n        this.renderCompletion();\n      }.bind(this),\n    });\n    // Render 'loading' element\n    this.populateFieldOptions();\n    this.renderCompletion();\n  },\n\n  populateFieldOptions(loadMore) {\n    const fieldOptions = this.getCurrentFieldOptions();\n    if (fieldOptions === null) {\n      // 1) we are out of field options context\n      // 2) field has no options\n      return;\n    }\n    let { options } = fieldOptions;\n    const prefix = fieldOptions.context && fieldOptions.context.prefix;\n    let cached;\n\n    if (options) {\n      // filter them locally\n      if (this.valuesCaseSensitive) {\n        options = options.filter((item) => (\n          // Case-sensitive\n          item.indexOf(prefix) >= 0\n        ));\n      } else {\n        options = options.filter((item) => (\n          // Case-insensitive\n          item.toLowerCase().indexOf(prefix.toLowerCase()) >= 0\n        ));\n      }\n    } else {\n      this.suggestions = [];\n      if (!fieldOptions.cacheKey) {\n        return;\n      }\n      cached = this.suggestionsCache.get(fieldOptions.cacheKey) || {};\n      options = cached.items || [];\n      if (!cached.loading\n          && (!cached.page || (loadMore && cached.has_next))) {\n        this.debouncedLoadFieldOptions(loadMore);\n      }\n      if (!options.length) {\n        // Should we show 'no results' message?\n        return;\n      }\n    }\n\n    this.highlightCaseSensitive = this.valuesCaseSensitive;\n    this.suggestions = options.map((f) => suggestion(f, '\"', '\"'));\n  },\n\n  onCompletionScroll() {\n    const rectHeight = this.completionUL.getBoundingClientRect().height;\n    const scrollBottom = this.completionUL.scrollTop + rectHeight;\n    if (scrollBottom > rectHeight\n        && scrollBottom > (this.completionUL.scrollHeight - rectHeight)) {\n      // TODO: add some checks of context?\n      this.populateFieldOptions(true);\n    }\n  },\n\n  generateSuggestions() {\n    const input = this.textarea;\n    let suggestions;\n    let snippetAfter;\n    let searchFilter;\n\n    if (!this.completionEnabled) {\n      this.prefix = '';\n      this.suggestions = [];\n      return;\n    }\n\n    if (!this.currentModel) {\n      // Introspections are not loaded yet\n      return;\n    }\n    if (input.selectionStart !== input.selectionEnd) {\n      // We shouldn't show suggestions when something is selected\n      this.prefix = '';\n      this.suggestions = [];\n      return;\n    }\n\n    // default search filter - find anywhere in the string, case-sensitive\n    searchFilter = function (item) {\n      return item.text.indexOf(this.prefix) >= 0;\n    }.bind(this);\n    // default highlight mode - case sensitive\n    this.highlightCaseSensitive = true;\n\n    const context = this.getContext(input.value, input.selectionStart);\n    const { modelStack } = context;\n    this.prefix = context.prefix;\n    const model = this.models[context.model];\n    const field = context.field && model[context.field];\n\n    switch (context.scope) {\n      case 'field':\n        this.suggestions = Object.keys(model).filter((f) => {\n          const { relation } = model[f];\n          if ((model[f].type === 'relation')\n            // Check that the model from a field relation wasn't in the stack\n            && modelStack.includes(relation)\n            // Last element in the stack could be equal to context model.\n            // E.g. an \"author\" can have the \"authors_in_genre\" relation\n            && (modelStack.slice(-1)[0] !== relation)\n          ) {\n            return false;\n          }\n          return true;\n        }).map((f) => (\n          suggestion(f, '', model[f].type === 'relation' ? '.' : ' ')\n        ));\n        break;\n\n      case 'comparison':\n        suggestions = ['=', ['!=', 'is not equal to']];\n        snippetAfter = ' ';\n        if (field && field.type !== 'bool') {\n          if (['date', 'datetime'].indexOf(field.type) >= 0) {\n            suggestions.push(\n              ['~', 'contains'],\n              ['!~', 'does not contain'],\n            );\n            snippetAfter = ' \"|\"';\n          } else if (field.type === 'str') {\n            suggestions.push(\n              ['~', 'contains'],\n              ['!~', 'does not contain'],\n              'startswith',\n              'not startswith',\n              'endswith',\n              'not endswith',\n            );\n            snippetAfter = ' \"|\"';\n          } else if (field.options) {\n            snippetAfter = ' \"|\"';\n          }\n          if (field.type !== 'str') {\n            suggestions.push('>', '>=', '<', '<=');\n          }\n        }\n        this.suggestions = suggestions.map((s) => {\n          if (typeof s === 'string') {\n            return suggestion(s, '', snippetAfter);\n          }\n          return suggestion(s[0], '', snippetAfter, s[1]);\n        });\n        if (field && field.type !== 'bool') {\n          if (['str', 'date', 'datetime'].indexOf(field.type) >= 0\n              || field.options) {\n            snippetAfter = ' (\"|\")';\n          } else {\n            snippetAfter = ' (|)';\n          }\n          this.suggestions.push(suggestion('in', '', snippetAfter));\n          this.suggestions.push(suggestion('not in', '', snippetAfter));\n        }\n        // use \"starts with\" search filter instead of default\n        searchFilter = function (item) {\n          // See http://stackoverflow.com/a/4579228\n          return item.text.lastIndexOf(this.prefix, 0) === 0;\n        }.bind(this);\n        break;\n\n      case 'value':\n        if (!field) {\n          // related field\n          this.suggestions = [suggestion('None', '', ' ')];\n        } else if (field.options) {\n          this.prefix = context.prefix;\n          this.populateFieldOptions();\n        } else if (field.type === 'bool') {\n          this.suggestions = [\n            suggestion('True', '', ' '),\n            suggestion('False', '', ' '),\n          ];\n          if (field.nullable) {\n            this.suggestions.push(suggestion('None', '', ' '));\n          }\n        } else if (field.type === 'unknown') {\n          // unknown field type, reset suggestions\n          this.prefix = '';\n          this.suggestions = [];\n        }\n        break;\n\n      case 'logical':\n        this.suggestions = [\n          suggestion('and', '', ' '),\n          suggestion('or', '', ' '),\n        ];\n        break;\n\n      default:\n        this.prefix = '';\n        this.suggestions = [];\n    }\n    this.suggestions = this.suggestions.filter(searchFilter);\n    if (this.suggestions.length === 1) {\n      this.selected = 0; // auto-select the only suggested item\n    } else {\n      this.selected = null;\n    }\n  },\n\n};\n\nexport default DjangoQL;\n","export function DOMReady(callback) {\n  if (document.readyState !== 'loading') {\n    callback();\n  } else {\n    document.addEventListener('DOMContentLoaded', callback);\n  }\n}\n\nexport function setUrlParams(url, params) {\n  const parts = url.split('?');\n  const path = parts[0];\n  let queryString = parts.slice(1).join('?');\n  const pairs = queryString.split('&');\n  let pair;\n  let key;\n  let value;\n  let i;\n\n  Object.keys(params).forEach((k) => {\n    key = encodeURI(k);\n    value = encodeURI(params[key]);\n    i = pairs.length;\n    while (i--) {\n      pair = pairs[i].split('=');\n      if (pair[0] === key) {\n        pair[1] = value;\n        pairs[i] = pair.join('=');\n        break;\n      }\n    }\n    if (i < 0) {\n      pairs.push(`${key}=${value}`);\n    }\n  });\n  queryString = pairs.join('&');\n  return queryString ? [path, queryString].join('?') : path;\n}\n\nexport function escapeRegExp(str) {\n  // http://stackoverflow.com\n  // /questions/3446170/escape-string-for-use-in-javascript-regex\n  // eslint-disable-next-line no-useless-escape\n  return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n}\n","import DjangoQL from 'djangoql-completion';\n\nimport 'djangoql-completion/dist/completion.css';\n\nwindow.DjangoQL = DjangoQL;\n"],"sourceRoot":""}